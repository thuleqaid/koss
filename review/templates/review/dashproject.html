{% extends 'review/base_js.html' %}
{% load staticfiles %}

{% block title %}Dashboard{% endblock %}

{% block body %}
{{ block.super }}
<div class="container">
<div id="container"></div>
</div>
<script type="text/javascript" src="{% static 'review/highcharts/highcharts.js' %}"></script>
<script type="text/javascript">
	var chart1;
	$(document).ready(function() {
		chart1 = new Highcharts.Chart({
			chart: {
				renderTo: 'container',
				type: 'column',
				borderWidth: 1
			},
			title: {
				text: 'Checklist Status'
			},
			xAxis: {
				categories: {{ chartinfo.checklist|safe }}
			},
			yAxis: {
				title: {
					text: '子项目数'
				},
				stackLabels: {
					enabled: true,
					style: {
						fontWeight: 'bold',
						color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray',
					}
				},
				min: 0,
				max: {{ chartinfo.maxcount }}
			},
			plotOptions: {
				column: {
					stacking: 'normal',
					dataLabels: {
						enabled: true,
						color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
					}
				}
			},
			tooltip: {
				formatter:function() {
					return '<b>'+this.x+'</b> - '+this.series.name+':'+this.y+'<br>'+this.point.extra;
				}
			},
			series: [{
				name: '未处理',
				data: {{ chartinfo.c_null|safe }}
				}, {
				name: '不可关闭',
				data: {{ chartinfo.c_ng|safe }}
				}, {
				name: '可关闭',
				data: {{ chartinfo.c_ok|safe }}
				}, {
				name: '已关闭',
				data: {{ chartinfo.c_locked|safe }}
				}]
			});
	});
</script>
{% endblock %}
